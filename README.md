Жизненный цикл сервиса

Цель работы

Познакомиться с жизненным циклом связанного и свободного сервиса в ОС Android, увидеть на практике порядок вызова методов жизненного цикла.
Задания для выполнения

1.Создайте в приложении сервис, переопределив все основные методы жизненного цикла. Каждый метод должен выводить в консоль свое название при вызове.

2.Не забудьте вызов методов суперкласса и объявление сервиса в манифесте приложения.

![image](https://user-images.githubusercontent.com/70980145/154661503-a26ef61d-b55a-416f-b1d3-8b2d5bad4d4a.png)

3.В основной активности создайте две конопки. При нажатии на первую интент, вызывающий созданный сервис (явный интент) рассылается методом startService(), при нажатии второй - методом bindService().

![image](https://user-images.githubusercontent.com/70980145/154661953-02f87d85-d409-4dc8-9866-1d71c643a108.png)

4.Запустите приложение и понаблюдайте за жизненным циклом сервиса.

![image](https://user-images.githubusercontent.com/70980145/154662055-3380e0b0-a726-4049-be1d-7657ebd6bc66.png)

![image](https://user-images.githubusercontent.com/70980145/154662185-4bc8d4ab-400c-437a-8883-29d03a8aeb1c.png)


![image](https://user-images.githubusercontent.com/70980145/154662342-d38d9a78-5e02-4cee-bf40-49713bb7acae.png)

![image](https://user-images.githubusercontent.com/70980145/154662382-44362d88-bfc7-4176-be1f-c5a17e00cc6c.png)


Контрольные вопросы

1.Когда происходит создание и удаление связанного сервиса?

При использовании метода onBind(), который вызывает метод onCreate(), который создает сервис. Если сервис не в запущен и клиентский компонент отвязывается от сервиса, то он уничтожается и вызывается onDestroy(). Метод onUnbind() удаляет сервис.

2.Какие методы жизненного цикла вызываются у сервиса и в какой последовательности?
onCreate() – вызывается, когда сервис создается системой.
onStartCommand() – вызывается, когда сервис переходит в активное состояние. 
onDestroy() – вызывается, когда сервис уничтожается системой. 
Для связанных:
onCreate() – вызывается когда первый клиент присоединяется к сервису вызовом bindService() с флагом BIND_AUTO_CREATE.
onBind() – вызывается системой, когда первый клиент присоединяется к сервису вызовом метода bindService(). 
onUnbind() – вызывается системой, когда все клиенты отсоединились от сервиса вызовом метода unbindService().
onDestroy() – вызывается после onUnbind(), перед тем как система уничтожит сервис.

3.Как соотносится ЖЦ активности и сервиса?
ЖЦ активности и в ЖЦ сервиса при первом запуске мы создаем методом onCreate(), а уничтожаем методом onDestroy(). После создания мы вызываем метод onStartCommand(), что означает что сервис переходит в активное состояние, вызывается метод onStart(), а далее при взаимодействии с пользователем onResume(), также ее можно поставить на паузу методом onPause(). В отличии от активности, сервисы могут быть связанные и несвязанные, тогда вместо onStartCommand(), вызывается метод onBind(), а впоследствии onUnbind(). Сервис может быть запущен как самостоятельная единица, а впоследствии может быть привязан к некоторым компонентам. В этом случае в сервисе должны быть обязательно реализованы оба метода onStartCommand() и onBind(). Сервисы существуют дольше активностей, до тех пор, пока ее не остановят или же она не остановится сама. Жизненный цикл сервиса намного проще жизненного цикла активности, однако он может быть осложнен тем, что сервис работает в фоновом режиме и пользователь может и не осознавать, что в некоторых случаях он имеет дело с работой сервисов.

4.Дополнительные задания

5.Добавьте в сервис полезное фоновое действие, которое выполняется продолжительное время. Как изменилось поведение сервиса?

6.Добавьте возможность из клиента (активности) убить сервис.

7Добавьте логирование методов жизненного цикла активности. Пронаблюдайте за ней. 
